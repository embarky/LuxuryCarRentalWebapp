<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      lang="en">

<h:head>
    <title>ELITE DRIVE - Reset Password</title>
</h:head>

<h:body>
    <h:form id="resetForm" prependId="false">

        <!-- Global Messages -->
        <p:messages id="globalMessages"
                    autoUpdate="true"
                    closable="true"
                    showDetail="true"/>

        <h2>Reset Password</h2>

        <p:tabView dynamic="true" cache="false">

            <!-- Admin Reset Password -->
            <p:tab title="Admin">
                <p:panelGrid columns="2" cellpadding="5">

                    <h:outputLabel for="adminEmail" value="Admin Email:"/>
                    <h:inputText id="adminEmail" value="#{resetBean.adminEmail}" required="true"/>

                    <h:outputLabel for="adminCode" value="Verification Code:"/>
                    <h:inputText id="adminCode" value="#{resetBean.adminCode}"/>

                    <h:outputLabel for="adminNewPassword" value="New Password:"/>
                    <h:inputSecret id="adminNewPassword" value="#{resetBean.adminNewPassword}" required="true"/>

                </p:panelGrid>

                <p:commandButton value="Send Verification Code"
                                 action="#{resetBean.sendAdminResetCode}"
                                 update="globalMessages"
                                 process="adminEmail"
                                 icon="pi pi-envelope"
                                 ajax="true"/>

                <p:commandButton value="Reset Password"
                                 action="#{resetBean.resetAdminPassword}"
                                 update="globalMessages"
                                 process="adminEmail adminCode adminNewPassword"
                                 icon="pi pi-key"
                                 ajax="true"/>
            </p:tab>

            <!-- Customer Reset Password -->
            <p:tab title="Customer">
                <p:panelGrid columns="2" cellpadding="5">

                    <h:outputLabel for="customerEmail" value="Customer Email:"/>
                    <h:inputText id="customerEmail" value="#{resetBean.customerEmail}" required="true"/>

                    <h:outputLabel for="customerCode" value="Verification Code:"/>
                    <h:inputText id="customerCode" value="#{resetBean.customerCode}"/>

                    <h:outputLabel for="customerNewPassword" value="New Password:"/>
                    <h:inputSecret id="customerNewPassword" value="#{resetBean.customerNewPassword}" required="true"/>

                </p:panelGrid>

                <p:commandButton value="Send Verification Code"
                                 action="#{resetBean.sendCustomerResetCode}"
                                 update="globalMessages"
                                 process="customerEmail"
                                 icon="pi pi-envelope"
                                 ajax="true"/>

                <p:commandButton value="Reset Password"
                                 action="#{resetBean.resetCustomerPassword}"
                                 update="globalMessages"
                                 process="customerEmail customerCode customerNewPassword"
                                 icon="pi pi-key"
                                 ajax="true"/>
            </p:tab>

        </p:tabView>
    </h:form>
</h:body>
</html>