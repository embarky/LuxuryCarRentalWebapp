<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      lang="en">

<h:head>
    <title>Elite Drive - Car Type Form</title>
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
    <h:outputStylesheet name="css/admin-page.css"/>
</h:head>

<h:body style="background:#f7f7f7;">

    <p:messages id="globalMessages" autoUpdate="true" closable="true" showDetail="true" />
    <!-- 获取 URL 参数 -->
    <f:metadata>
        <f:viewParam name="carTypeId" value="#{carTypeFormBean.carTypeId}" converter="#{carTypeFormBean.uuidConverter}"/>
    </f:metadata>

    <div class="container mt-5">
        <h2 class="mb-4 text-center">
            #{carTypeFormBean.editing ? 'Edit Car Type' : 'Create New Car Type'}
        </h2>

        <h:form id="carTypeForm">
            <h:messages styleClass="text-danger mb-3" globalOnly="true"/>

            <div class="card shadow p-4">

                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="brand" class="form-label">Brand *</label>
                        <h:inputText id="brand" value="#{carTypeFormBean.carType.brand}"
                                     required="true" styleClass="form-control"/>
                    </div>
                    <div class="col-md-6">
                        <label for="model" class="form-label">Model *</label>
                        <h:inputText id="model" value="#{carTypeFormBean.carType.model}"
                                     required="true" styleClass="form-control"/>
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-md-4">
                        <label for="category" class="form-label">Category</label>
                        <h:inputText id="category" value="#{carTypeFormBean.carType.category}"
                                     styleClass="form-control"/>
                    </div>
                    <div class="col-md-4">
                        <label for="engine" class="form-label">Engine</label>
                        <h:inputText id="engine" value="#{carTypeFormBean.carType.engine}"
                                     styleClass="form-control"/>
                    </div>
                    <div class="col-md-2">
                        <label for="power" class="form-label">Power (HP)</label>
                        <h:inputText id="power" value="#{carTypeFormBean.carType.power}"
                                     styleClass="form-control"/>
                    </div>
                    <div class="col-md-2">
                        <label for="seats" class="form-label">Seats</label>
                        <h:inputText id="seats" value="#{carTypeFormBean.carType.seats}"
                                     styleClass="form-control"/>
                    </div>
                </div>

                <div class="mb-3">
                    <label for="description" class="form-label">Description</label>
                    <h:inputTextarea id="description" value="#{carTypeFormBean.carType.description}"
                                     rows="4" styleClass="form-control"/>
                </div>

                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="driveType" class="form-label">Drive Type *</label>
                        <h:selectOneMenu id="driveType" value="#{carTypeFormBean.carType.driveType}"
                                         required="true" styleClass="form-select">
                            <f:selectItem itemLabel="Select Drive Type" itemValue="" />
                            <f:selectItems value="#{carTypeFormBean.driveTypes}" var="dt"
                                           itemLabel="#{dt}" itemValue="#{dt}" />
                        </h:selectOneMenu>
                    </div>
                    <div class="col-md-6">
                        <label for="transmission" class="form-label">Transmission *</label>
                        <h:selectOneMenu id="transmission" value="#{carTypeFormBean.carType.transmission}"
                                         required="true" styleClass="form-select">
                            <f:selectItem itemLabel="Select Transmission" itemValue="" />
                            <f:selectItems value="#{carTypeFormBean.transmissions}" var="tr"
                                           itemLabel="#{tr}" itemValue="#{tr}" />
                        </h:selectOneMenu>
                    </div>
                </div>

                <div class="mb-3">
                    <label for="features" class="form-label">Features (comma separated)</label>
                    <h:inputTextarea id="features" value="#{carTypeFormBean.featuresAsString}"
                                     rows="2" styleClass="form-control"/>
                </div>

                <div class="d-flex justify-content-end gap-2 mt-4">
                    <h:commandButton value="Save" action="#{carTypeFormBean.save}"
                                     styleClass="btn btn-success"/>
                    <h:commandButton value="Cancel"
                                     action="/pages/admin/car_type.xhtml?faces-redirect=true"
                                     styleClass="btn btn-secondary"
                                     process="@this"
                                     immediate="true"/>
                </div>

            </div>
        </h:form>
    </div>

</h:body>
</html>