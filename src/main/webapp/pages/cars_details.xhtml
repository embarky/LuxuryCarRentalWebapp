<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="/resources/templates/master_template.xhtml">

    <ui:define name="title">Car Details</ui:define>

    <ui:define name="content">
        <h:form id="detailsForm">

            <p:growl id="growl" showDetail="true" life="5000"/>

            <p:panel header="Car Details" styleClass="shadow p-4 mb-4">
                <h:panelGrid columns="2" columnClasses="image-col,info-col" cellpadding="15">

                    <p:panel styleClass="car-image-panel">
                        <h:graphicImage value="#{carDetailsBean.car.imageUrl}"
                                        style="width:100%; height:auto; border-radius:8px; object-fit:cover"/>
                    </p:panel>

                    <p:panel styleClass="car-info-panel p-3">
                        <h2>#{carDetailsBean.car.carType.brand} #{carDetailsBean.car.carType.model}</h2>
                        <p><strong>Category:</strong> #{carDetailsBean.car.carType.category}</p>
                        <p><strong>Description:</strong> #{carDetailsBean.car.carType.description}</p>
                        <p><strong>Engine:</strong> #{carDetailsBean.car.carType.engine}</p>
                        <p><strong>Power:</strong> #{carDetailsBean.car.carType.power} HP</p>
                        <p><strong>Seats:</strong> #{carDetailsBean.car.carType.seats}</p>
                        <p><strong>Transmission:</strong> #{carDetailsBean.car.carType.transmission}</p>
                        <p><strong>Drive Type:</strong> #{carDetailsBean.car.carType.driveType}</p>
                        <p><strong>Daily Price:</strong> CHF #{carDetailsBean.car.dailyRentalPrice}</p>
                        <p><strong>Status:</strong> #{carDetailsBean.car.status}</p>
                    </p:panel>
                </h:panelGrid>

                <p:panel header="Features" styleClass="mt-4">
                    <ul>
                        <ui:repeat value="#{carDetailsBean.car.carType.features}" var="f">
                            <li>#{f}</li>
                        </ui:repeat>
                    </ul>
                </p:panel>
            </p:panel>

            <p:panel header="Book This Car" styleClass="shadow p-4 mt-4">
                <p:calendar id="startDate" value="#{carDetailsBean.startDate}" pattern="yyyy-MM-dd"
                            label="Start Date" showIcon="true" required="true"/>
                <p:calendar id="endDate" value="#{carDetailsBean.endDate}" pattern="yyyy-MM-dd"
                            label="End Date" showIcon="true" required="true"/>

                <p:commandButton value="Book This Car"
                                 action="#{carDetailsBean.bookCar}"
                                 update="growl"
                                 process="@form"
                                 ajax="true"/>
            </p:panel>

        </h:form>
    </ui:define>

</ui:composition>